(this.webpackJsonpcourseinfo=this.webpackJsonpcourseinfo||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},19:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(13),u=t.n(c),o=t(2),i=(t(19),t(3)),l=t.n(i),m="/api/persons",f=function(){return l.a.get(m).then((function(e){return e.data}))},d=function(e){return l.a.post(m,e).then((function(e){return e.data}))},s=function(e){return l.a.delete("".concat(m,"/").concat(e))},h=function(e,n){return l.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},b=function(e){var n=e.newFilter,t=e.setNewFilter;return r.a.createElement("div",null,"filter shown with "," ",r.a.createElement("input",{value:n,onChange:function(e){return t(e.target.value)}}))},v=function(e){var n=e.newName,t=e.setNewName,a=e.newNumber,c=e.setNewNumber,u=e.handleSubmit;return r.a.createElement("form",{onSubmit:u},r.a.createElement("div",null,"name: "," ",r.a.createElement("input",{value:n,onChange:function(e){return t(e.target.value)}})),r.a.createElement("div",null,"number: "," ",r.a.createElement("input",{value:a,onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},p=function(e){var n=e.person,t=e.handleDelete;return r.a.createElement("div",null,n.name," ",n.number," "," ",r.a.createElement("button",{onClick:t(n)},"delete"))},w=function(e){var n=e.persons,t=e.handleDelete;return r.a.createElement("div",null,n.map((function(e){return r.a.createElement(p,{key:e.name,person:e,handleDelete:t})})))},E=function(e){var n=e.notification;return null===n?null:r.a.createElement("div",{className:"notification ".concat(n.type)},n.message)},N=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(""),i=Object(o.a)(u,2),l=i[0],m=i[1],p=Object(a.useState)(""),N=Object(o.a)(p,2),g=N[0],j=N[1],O=Object(a.useState)(""),y=Object(o.a)(O,2),D=y[0],S=y[1],k=Object(a.useState)(null),C=Object(o.a)(k,2),F=C[0],I=C[1],A=t.map((function(e){return e.name})).includes(l),J=""===D.trim()?t:t.filter((function(e){return e.name.toLowerCase().includes(D.toLowerCase())}));Object(a.useEffect)((function(){f().then((function(e){return c(e)}))}),[]);var L=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";I({message:e,type:n}),setTimeout((function(){I(null)}),5e3)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(E,{notification:F}),r.a.createElement(b,{newFilter:D,setNewFilter:S}),r.a.createElement("h2",null,"Add a new"),r.a.createElement(v,{newName:l,setNewName:m,newNumber:g,setNewNumber:j,handleSubmit:function(e){e.preventDefault();var n={name:l,number:g};if(A){if(!0===window.confirm("".concat(l," is already added to phonebook, replace the old number with a new one?"))){var a=t.find((function(e){return e.name===l})).id;h(a,n).then((function(e){c(t.map((function(n){return n.id===a?e:n}))),m(""),j(""),L("Updated ".concat(l))})).catch((function(e){L("Information of ".concat(l," has already been removed from server"),"error"),c(t.filter((function(e){return e.id!==a})))}))}}else d(n).then((function(e){c(t.concat(e)),m(""),j(""),L("Added ".concat(l))}))}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(w,{persons:J,handleDelete:function(e){return function(n){n.preventDefault(),!0===window.confirm("Delete ".concat(e.name,"?"))&&s(e.id).then((function(){c(t.filter((function(n){return n.id!==e.id}))),L("Deleted ".concat(e.name))})).catch((function(n){L("Information of ".concat(l," has already been removed from server"),"error"),c(t.filter((function(n){return n.id!==e.id})))}))}}}))};u.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.aeb79661.chunk.js.map